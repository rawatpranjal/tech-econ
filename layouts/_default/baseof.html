<!DOCTYPE html>
<html lang="{{ .Site.LanguageCode }}">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{{ .Site.Title }}</title>
    <meta name="description" content="{{ with .Description }}{{ . }}{{ else }}{{ .Site.Params.description }}{{ end }}">
    <link rel="canonical" href="{{ .Permalink }}">

    <!-- Preconnect to CDNs -->
    <link rel="preconnect" href="https://unpkg.com">
    <link rel="preconnect" href="https://cdn.jsdelivr.net">

    <!-- Open Graph / Social Preview -->
    <meta property="og:title" content="{{ if .Title }}{{ .Title }} | {{ .Site.Title }}{{ else }}{{ .Site.Title }}{{ end }}">
    <meta property="og:description" content="{{ with .Description }}{{ . }}{{ else }}Real tools for applied researchers. Packages, datasets, and learning resources.{{ end }}">
    <meta property="og:type" content="website">
    <meta property="og:url" content="{{ .Permalink }}">
    <meta property="og:image" content="{{ .Site.BaseURL }}og-image.png">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="{{ if .Title }}{{ .Title }} | {{ .Site.Title }}{{ else }}{{ .Site.Title }}{{ end }}">
    <meta name="twitter:description" content="{{ with .Description }}{{ . }}{{ else }}Real tools for applied researchers.{{ end }}">
    <meta name="twitter:image" content="{{ .Site.BaseURL }}og-image.png">

    <!-- Structured Data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": "{{ .Site.Title }}",
      "url": "{{ .Site.BaseURL }}",
      "description": "{{ .Site.Params.description }}",
      "author": {
        "@type": "Person",
        "name": "{{ .Site.Params.author }}"
      }
    }
    </script>

    <!-- Favicons -->
    <link rel="icon" type="image/x-icon" href="{{ "favicon.ico" | relURL }}">
    <link rel="icon" type="image/png" sizes="32x32" href="{{ "favicon-32x32.png" | relURL }}">
    <link rel="icon" type="image/png" sizes="16x16" href="{{ "favicon-16x16.png" | relURL }}">
    <link rel="apple-touch-icon" sizes="180x180" href="{{ "apple-touch-icon.png" | relURL }}">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="{{ "css/custom.css" | relURL }}">

    <!-- AOS (Animate on Scroll) -->
    <link rel="stylesheet" href="https://unpkg.com/aos@2.3.4/dist/aos.css">
</head>
<body>
    <!-- Skip to Content (Accessibility) -->
    <a href="#main-content" class="skip-link">Skip to content</a>

    <!-- Reading Progress Bar -->
    <div class="reading-progress" id="reading-progress"></div>

    <!-- Mobile Menu Toggle -->
    <button class="mobile-menu-toggle" id="mobile-menu-toggle" aria-label="Toggle navigation" aria-expanded="false">
        <svg viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M3 12h18M3 6h18M3 18h18"></path>
        </svg>
    </button>

    <!-- Sidebar Navigation -->
    <nav class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <span class="sidebar-logo">tech-econ</span>
        </div>
        <ul class="sidebar-nav">
            <!-- Home -->
            <li>
                <a href="{{ "" | relURL }}" class="sidebar-link{{ if .IsHome }} active{{ end }}">
                    <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                        <polyline points="9 22 9 12 15 12 15 22"></polyline>
                    </svg>
                    Home
                </a>
            </li>

            <li class="sidebar-divider"></li>

            <!-- Learning Group -->
            <li>
                <a href="{{ "start/" | relURL }}" class="sidebar-link{{ if eq .Section "start" }} active{{ end }}">
                    <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2">
                        <polygon points="5 3 19 12 5 21 5 3"></polygon>
                    </svg>
                    Getting Started
                </a>
            </li>
            <li>
                <a href="{{ "learning/" | relURL }}" class="sidebar-link{{ if eq .Section "learning" }} active{{ end }}">
                    <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
                        <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>
                    </svg>
                    Learning
                </a>
            </li>
            <li>
                <a href="{{ "career/" | relURL }}" class="sidebar-link{{ if eq .Section "career" }} active{{ end }}">
                    <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="2" y="7" width="20" height="14" rx="2" ry="2"></rect>
                        <path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"></path>
                    </svg>
                    Career
                </a>
            </li>
            <li>
                <a href="{{ "talks/" | relURL }}" class="sidebar-link{{ if eq .Section "talks" }} active{{ end }}">
                    <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"></path>
                        <path d="M19 10v2a7 7 0 0 1-14 0v-2"></path>
                        <line x1="12" y1="19" x2="12" y2="23"></line>
                        <line x1="8" y1="23" x2="16" y2="23"></line>
                    </svg>
                    Talks
                </a>
            </li>
            <li>
                <a href="{{ "community/" | relURL }}" class="sidebar-link{{ if eq .Section "community" }} active{{ end }}">
                    <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                        <circle cx="9" cy="7" r="4"></circle>
                        <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                        <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                    </svg>
                    Community
                </a>
            </li>

            <li class="sidebar-divider"></li>

            <!-- Data Group -->
            <li>
                <a href="{{ "papers/" | relURL }}" class="sidebar-link{{ if eq .Section "papers" }} active{{ end }}">
                    <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                        <polyline points="14 2 14 8 20 8"></polyline>
                        <line x1="16" y1="13" x2="8" y2="13"></line>
                        <line x1="16" y1="17" x2="8" y2="17"></line>
                        <polyline points="10 9 9 9 8 9"></polyline>
                    </svg>
                    Papers
                </a>
            </li>
            <li>
                <a href="{{ "packages/" | relURL }}" class="sidebar-link{{ if eq .Section "packages" }} active{{ end }}">
                    <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path>
                        <polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline>
                        <line x1="12" y1="22.08" x2="12" y2="12"></line>
                    </svg>
                    Packages
                </a>
            </li>
            <li>
                <a href="{{ "datasets/" | relURL }}" class="sidebar-link{{ if eq .Section "datasets" }} active{{ end }}">
                    <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2">
                        <ellipse cx="12" cy="5" rx="9" ry="3"></ellipse>
                        <path d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"></path>
                        <path d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"></path>
                    </svg>
                    Datasets
                </a>
            </li>

            <li class="sidebar-divider"></li>

            <!-- Info -->
            <li>
                <a href="{{ "analytics/" | relURL }}" class="sidebar-link{{ if eq .Section "analytics" }} active{{ end }}">
                    <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 20V10"></path>
                        <path d="M12 20V4"></path>
                        <path d="M6 20v-6"></path>
                    </svg>
                    Interest Meter
                </a>
            </li>
            <li>
                <a href="{{ "about/" | relURL }}" class="sidebar-link{{ if eq .Section "about" }} active{{ end }}">
                    <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"></circle>
                        <path d="M12 16v-4"></path>
                        <path d="M12 8h.01"></path>
                    </svg>
                    About
                </a>
            </li>
        </ul>
        <!-- Global Search Trigger -->
        <a href="#" class="global-search-trigger" aria-label="Search (Cmd+K)">
            <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="11" cy="11" r="8"></circle>
                <path d="m21 21-4.35-4.35"></path>
            </svg>
            <span>Search</span>
            <kbd>⌘K</kbd>
        </a>
        <div class="sidebar-joke" id="sidebar-joke"></div>
        <div class="sidebar-footer">
            <a href="{{ "submit/" | relURL }}" class="sidebar-footer-link{{ if eq .Section "submit" }} active{{ end }}">
                <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="12" y1="5" x2="12" y2="19"></line>
                    <line x1="5" y1="12" x2="19" y2="12"></line>
                </svg>
                Submit Package
            </a>
            <a href="https://github.com/rawatpranjal/tech-econ" target="_blank" class="sidebar-footer-link">
                <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor">
                    <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                </svg>
                GitHub
            </a>
            <a href="{{ "feedback/" | relURL }}" class="sidebar-footer-link{{ if eq .Section "feedback" }} active{{ end }}">
                <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
                </svg>
                Feedback
            </a>
            <a href="{{ "subscribe/" | relURL }}" class="sidebar-footer-link{{ if eq .Section "subscribe" }} active{{ end }}">
                <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M4 11a9 9 0 0 1 9 9"></path>
                    <path d="M4 4a16 16 0 0 1 16 16"></path>
                    <circle cx="5" cy="19" r="1"></circle>
                </svg>
                Subscribe
            </a>
            <div class="sidebar-footer-meta">
                <button id="theme-toggle" class="theme-toggle" aria-label="Toggle dark mode">
                    <svg class="sun-icon" viewBox="0 0 24 24" width="12" height="12" fill="none" stroke="currentColor" stroke-width="2" style="display: none;">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                    <svg class="moon-icon" viewBox="0 0 24 24" width="12" height="12" fill="none" stroke="currentColor" stroke-width="2" style="display: block;">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                </button>
                <span class="sidebar-visitors" id="visitor-count"></span>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main id="main-content" class="main-content">
        {{ block "main" . }}{{ end }}
    </main>

    <!-- Global Search Modal -->
    {{ partial "global-search-modal.html" . }}

    <!-- Global Search Data -->
    <script id="global-search-data" type="application/json">
        {{ partial "global-search-index.html" . | safeJS }}
    </script>

    <!-- Custom JS -->
    <script src="{{ "js/theme.js" | relURL }}"></script>

    <!-- Fuse.js for page search -->
    <script src="https://cdn.jsdelivr.net/npm/fuse.js@7.0.0"></script>

    <!-- Unified Search System (MiniSearch + Transformers.js) -->
    <script src="{{ "js/search/search-synonyms.js" | relURL }}"></script>
    <script src="{{ "js/search/search-cache.js" | relURL }}"></script>
    <script src="{{ "js/search/unified-search.js" | relURL }}"></script>
    <script src="{{ "js/toggle.js" | relURL }}"></script>

    <!-- AOS Init -->
    <script src="https://unpkg.com/aos@2.3.4/dist/aos.js"></script>
    <script>
        try {
            AOS.init({
                duration: 600,
                easing: 'ease-out-cubic',
                once: true,
                offset: 50
            });
        } catch(e) {}
    </script>

    <!-- Reading Progress Bar -->
    <script>
        (function() {
            var progressBar = document.getElementById('reading-progress');
            if (!progressBar) return;

            function updateProgress() {
                var scrollTop = window.scrollY;
                var docHeight = document.documentElement.scrollHeight - window.innerHeight;
                var progress = docHeight > 0 ? (scrollTop / docHeight) * 100 : 0;
                progressBar.style.width = progress + '%';
            }

            window.addEventListener('scroll', updateProgress, { passive: true });
            updateProgress();
        })();
    </script>

    <script>
        // Mobile menu toggle
        var menuToggle = document.getElementById('mobile-menu-toggle');
        menuToggle.addEventListener('click', function() {
            var sidebar = document.getElementById('sidebar');
            var isOpen = sidebar.classList.toggle('open');
            document.body.classList.toggle('sidebar-open');
            menuToggle.setAttribute('aria-expanded', isOpen);
        });
        // Close sidebar when clicking outside on mobile
        document.querySelector('.main-content').addEventListener('click', function() {
            if (window.innerWidth <= 768) {
                document.getElementById('sidebar').classList.remove('open');
                document.body.classList.remove('sidebar-open');
                menuToggle.setAttribute('aria-expanded', 'false');
            }
        });
        // Economist & statistician jokes
        var jokes = [
            "Why did the economist break up? Too many sunk costs.",
            "Economists have predicted 9 of the last 5 recessions.",
            "A statistician drowned crossing a river that was 3 feet deep on average.",
            "Why do economists exist? To make weather forecasters look good.",
            "An economist is someone who didn't have enough personality to become an accountant.",
            "99% of all statistics only tell 49% of the story.",
            "Why did the Bayesian cross the road? You need more data to tell.",
            "Econometrics: the art of drawing a crooked line from an unproved assumption to a foregone conclusion.",
            "The first law of economists: For every economist, there exists an equal and opposite economist. The second law: They're both wrong.",
            "Q: How many econometricians does it take to change a light bulb? A: We'll need more data.",
            "A regression walks into a bar. The bartender asks, \"What can I get you?\" The regression replies, \"Just fit me a line.\"",
            "How many Chicago School economists does it take to change a light bulb? None. If the light bulb needed changing, the market would have already done it.",
            "Two economists were shipwrecked on a desert island. Over three years, they made millions selling their hats to each other.",
            "An economist is an expert who will know tomorrow why the things he predicted yesterday didn't happen today.",
            "Economic forecasters assume everything, except responsibility.",
            "I asked a statistician for her phone number... she gave me an estimate.",
            "Statistics means never having to say you're certain.",
            "Three econometricians went hunting. The first shot a foot to the left. The second shot a foot to the right. The third shouted: \"We got it!\"",
            "Put two economists in a room and you get two opinions—unless one of them is Lord Keynes, in which case you get three. — Winston Churchill",
            "Old econometricians never die—they just get OLS.",
            "A statistician's lifetime ambition: to be wrong only 5% of the time.",
            "Why do economists love nature? Because of all the natural experiments."
        ];
        var jokeEl = document.getElementById('sidebar-joke');
        if (jokeEl) {
            var stored = sessionStorage.getItem('sidebar-joke-data');
            var joke;
            if (stored) {
                var data = JSON.parse(stored);
                var elapsed = Date.now() - data.timestamp;
                if (elapsed < 5 * 60 * 1000) { // 5 minutes
                    joke = data.joke;
                }
            }
            if (!joke) {
                joke = jokes[Math.floor(Math.random() * jokes.length)];
                sessionStorage.setItem('sidebar-joke-data', JSON.stringify({
                    joke: joke,
                    timestamp: Date.now()
                }));
            }
            jokeEl.textContent = joke;
        }
    </script>

    <!-- GoatCounter Analytics -->
    <script data-goatcounter="https://tech-econ.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script>
    <script>
        // Fetch visitor count from GoatCounter API
        fetch('https://tech-econ.goatcounter.com/counter/TOTAL.json')
            .then(function(r) { return r.json(); })
            .then(function(data) {
                var el = document.getElementById('visitor-count');
                if (el && data.count) {
                    el.textContent = data.count.toLocaleString() + ' views';
                }
            })
            .catch(function() {});
    </script>

    <!-- Chatbase AI Chatbot -->
    <script>
    (function(){if(!window.chatbase||window.chatbase("getState")!=="initialized"){window.chatbase=(...arguments)=>{if(!window.chatbase.q){window.chatbase.q=[]}window.chatbase.q.push(arguments)};window.chatbase=new Proxy(window.chatbase,{get(target,prop){if(prop==="q"){return target.q}return(...args)=>target(prop,...args)}})}const onLoad=function(){const script=document.createElement("script");script.src="https://www.chatbase.co/embed.min.js";script.id="62TKxaUCBMbZP1tK2BDK6";script.domain="www.chatbase.co";document.body.appendChild(script)};if(document.readyState==="complete"){onLoad()}else{window.addEventListener("load",onLoad)}})();
    </script>

    <!-- User Analytics Tracker -->
    {{ if .Site.Params.trackerEndpoint }}
    <script>
      window.TRACKER_CONFIG = {
        endpoint: "{{ .Site.Params.trackerEndpoint }}",
        enabled: {{ default true .Site.Params.trackerEnabled }},
        debug: {{ default false .Site.Params.trackerDebug }}
      };
    </script>
    <script src="{{ "js/tracker.js" | relURL }}" defer></script>
    {{ end }}
</body>
</html>
