<!-- Global Search Modal -->
<div id="global-search-modal" class="global-search-modal" style="display: none;">
  <div class="global-search-backdrop"></div>
  <div class="global-search-container">
    <div class="global-search-header">
      <div class="global-search-input-wrapper">
        <svg class="search-icon" viewBox="0 0 24 24" width="20" height="20">
          <circle cx="11" cy="11" r="8" fill="none" stroke="currentColor" stroke-width="2"/>
          <path d="m21 21-4.35-4.35" fill="none" stroke="currentColor" stroke-width="2"/>
        </svg>
        <input
          type="text"
          id="global-search-input"
          class="global-search-input"
          placeholder="Search packages, datasets, resources..."
          autocomplete="off"
        />
        <button id="search-syntax-help" class="search-syntax-help-btn" title="Search syntax help" type="button">?</button>
        <button id="llm-search-toggle" class="llm-search-toggle-btn" title="AI-enhanced search" type="button">
          <svg class="llm-icon" viewBox="0 0 24 24" width="14" height="14">
            <path fill="currentColor" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/>
          </svg>
          <span class="toggle-text">AI</span>
        </button>
        <div id="search-syntax-tooltip" class="search-syntax-tooltip" style="display: none;">
          <div class="syntax-tooltip-header">Advanced Search Syntax</div>
          <div class="syntax-tooltip-content">
            <div class="syntax-row">
              <code>"exact phrase"</code>
              <span>Match exact phrase</span>
            </div>
            <div class="syntax-row">
              <code>author:Smith</code>
              <span>Filter by author</span>
            </div>
            <div class="syntax-row">
              <code>type:paper</code>
              <span>Filter by type</span>
            </div>
            <div class="syntax-row">
              <code>year:2024</code>
              <span>Filter by year</span>
            </div>
            <div class="syntax-row">
              <code>topic:causal</code>
              <span>Filter by topic</span>
            </div>
            <div class="syntax-row">
              <code>-term</code>
              <span>Exclude term</span>
            </div>
          </div>
          <div class="syntax-tooltip-example">
            Example: <code>causal inference author:Angrist -RCT</code>
          </div>
        </div>
        <kbd class="global-search-kbd">ESC</kbd>
      </div>
    </div>
    <div id="global-search-filters" class="global-search-filters" style="display: none;">
      <!-- Type filter chips rendered by JS -->
    </div>
    <div id="llm-expanded-terms" class="llm-expanded-terms" style="display: none;">
      <!-- Expanded query terms rendered by JS -->
    </div>
    <div class="global-search-body">
      <div id="global-search-results" class="global-search-results">
        <!-- Results rendered here -->
      </div>
      <div id="global-search-empty" class="global-search-empty" style="display: none;">
        <p>No results found</p>
      </div>
      <div id="llm-explanation-panel" class="llm-explanation-panel" style="display: none;">
        <div class="explanation-header">
          <span class="explanation-title">Why this result?</span>
          <button id="llm-explanation-close" class="explanation-close" type="button">&times;</button>
        </div>
        <div id="llm-explanation-content" class="explanation-content">
          <!-- Streaming explanation appears here -->
        </div>
      </div>
      <div id="global-search-loading" class="global-search-loading" style="display: none;">
        <div class="loading-spinner"></div>
        <p>Searching...</p>
      </div>
      <div id="global-search-hint" class="global-search-hint">
        <p>Start typing to search across all content</p>
        <div class="type-filters">
          <span class="type-badge type-package">Packages</span>
          <span class="type-badge type-dataset">Datasets</span>
          <span class="type-badge type-resource">Resources</span>
          <span class="type-badge type-talk">Talks</span>
          <span class="type-badge type-career">Career</span>
          <span class="type-badge type-community">Community</span>
        </div>
      </div>
    </div>
    <div class="global-search-footer">
      <span><kbd>↑</kbd><kbd>↓</kbd> Navigate</span>
      <span><kbd>↵</kbd> Open</span>
      <span><kbd>ESC</kbd> Close</span>
    </div>
  </div>
</div>
